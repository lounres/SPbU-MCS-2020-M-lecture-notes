\documentclass[12pt,a4paper]{article}
\usepackage{math-text}

\title{Основы наивной теории множеств.}
\author{\href{https://users.math-cs.spbu.ru/~speranski}{Станислав Олегович Сперанский}}
\date{}

\newcommand{\Pcal}{\ensuremath{\mathcal{P}}\xspace}
\DeclareMathOperator{\Ind}{Ind}
\DeclareMathOperator{\dom}{dom}
\DeclareMathOperator{\range}{range}
\DeclareMathOperator{\Min}{Min}

\begin{document}
    \maketitle

    Материалы лекций: \href{https://users.math-cs.spbu.ru/~speranski/courses/sets-2020-autumn/materials.html}{ссылка}
    
    Литература:
    \begin{itemize}
        \item K. Hrbacek and T. Jech. Introduction to Set Theory. 3rd ed., revised and expanded. Marcel Dekker, Inc., 1999.
        \item T. Jech. Set Theory. 3rd ed., revised and expanded. Springer, 2002.
    \end{itemize}

    Будем рассматривать как базовые выражения ``$x$ равен (совпадает с) $y$'' (``$x=y$'') ``$x$ лежит в $y$'' (``$x\in y$'').

    \begin{definition}[Наиваная схема аксиом выделения]
        Пусть $\Phi(x)$ --- произвольное условие на объекты. Тогда существует $X$, что $\forall u (\Phi(u) \leftrightarrow u \in X)$. В этом случае $X$ обозначается как $\{u \mid \Phi(u)\}$.
    \end{definition}

    \begin{statement}[парадокс Рассела]
        Пусть $R = \{u \mid u \notin u\}$. Тогда $R$ не может лежать в себе и не может не лежать в себе одновременно.
    \end{statement}

    Из-за данного парадокса будем рассматривать только условия, образованные переменными и $\in$, $=$, $\neg$, $\wedge$, $\vee$, $\leftarrow$, $\leftrightarrow$, $\forall$, $\exists$.

    \begin{definition}[аксиомы ZFC (= ZF (аксиомы Цермело-Френкеля) + C (аксиома выбора))]\ 
        \begin{description}
            \item[Ext)] ``Аксиома экстенциональности'':
                \[\forall X \forall Y (\forall u (u \in X \leftrightarrow u \in Y) \leftrightarrow X=Y)\]
            \item[Empty)] ``Аксиома пустого множества'':
                \[\exists \varnothing\; \forall u\, (u \notin \varnothing)\]
            \item[Pair)] ``Аксиома пары'':
                \[\forall X\, \forall Y\; \exists Z (\forall u\, (u \in Z \leftrightarrow (u = X \vee u = Y)))\]
                Обозначение: $Z = \{X, Y\}$.
            \item[Sep)] ``Схема аксиом выделения'':
                \[\forall \Phi(x)\quad \forall X\, \exists Y\; \forall u\, (u\in Y \leftrightarrow (u \in X \wedge \Phi(u)))\]
                Обозначение: $Y = \{u \in X \mid \Phi(u)\}$.

                \begin{corollary*}
                    Операторы
                    \begin{align*}
                        X \cap Y &:= \{u \mid u \in X \wedge u \in Y\}\\
                        X \setminus Y &:= \{u \in X \mid u \notin Y\}\\
                        \bigcap X &:= \{u \mid \forall v \in X \quad u \in v\}
                    \end{align*}
                    определены корректно.
                \end{corollary*}
            \item[Union)] ``Аксиома объединения'':
                \[\forall X\, \exists Y\; \forall u\, (u \in Y \leftrightarrow \exists v\, (v \in X \wedge u \in v))\]
                Обозначение: $Y=\bigcup X$.

                \begin{corollary*}
                    Оператор
                    \[
                        X \cup Y := \bigcup \{X, Y\} = \{u \mid u \in X \wedge u \in Y\}
                    \]
                    определён корректно.
                \end{corollary*}
            \item[Power)] Пусть $x \subseteq y := \forall v\, \{v \in x \rightarrow v \in y\}$. ``Аксиома степени'':
                \[
                    \forall X\, \exists Y\; \forall u\, (u \in Y \leftrightarrow u \subseteq X)
                \]
                Обозначение: $Y = \Pcal(X) := \{u \mid u \subseteq X\}$.
                $\Pcal(X)$ --- ``множество-степень X'' или ``булеан X''.

                \begin{definition}
                    Упорядоченная пара --- это объект от некоторых $X_1$ и $Y_1$, который равен другому такому объекту от $X_2$ и $Y_2$ тогда и только тогда, когда $X_1 = X_2 \wedge Y_1 = Y_2$.
                \end{definition}

                \begin{definition}
                    \emph{Декартово произведение} $X$ и $Y$ ($X \times Y$) --- $\{(x; y) \mid x \in X \wedge y \in Y\}$. 
                \end{definition}

                \begin{remark}
                    Можно нелсожно показать, что декартово произведение определено корректно.
                \end{remark}
            \item[Inf)] Пусть $\Ind(X) := \varnothing \in X \wedge \forall u\, (u \in X \wedge u \cup \{u\} \in X)$. Если $\Ind(X)$, то $X$ называется индуктивным. ``Аксиома бесконечности'': существует индуктивное множество.
            \item[Repl)] ``Схема аксиом подстановки'':
                \begin{align*}
                    \forall \Phi(x, y)\;&\\
                    &\forall x\, \forall y_1\, \forall y_2\, ((\Phi(x, y_1) \wedge \Phi(x, y_2)) \rightarrow y_1 = y_2) \rightarrow\\
                    &\forall X\, \exists Y\; \forall y\, (y \in Y \leftrightarrow \exists x (x \in X \wedge \Phi(x, y)))
                \end{align*}
            \item[Reg)] ``Аксиома регулярности'':
                \[
                    \forall X\, (X\neq \varnothing \rightarrow \exists u\, (u\in X \wedge X \cap u = \varnothing))
                \]
        \end{description}
    \end{definition}

    \section{Отношения.}

    \begin{definition}
        \emph{Бинарное (или двухместное) отношение} $R$ между $X$ и $Y$ --- подмножество $X \times Y$. Если $Y = X$, $R$ называется \emph{бинарным (или двухместным) отношением} на $X$.\\
        Обозначение: $(x, y) \in R \Leftrightarrow xRy$.
    \end{definition}

    \begin{definition}
        \begin{align*}
            \dom(R) &:= \{u \in X \mid \exists v\quad uRv\}&& \text{``область определения $R$''}\\
            \range(R) &:= \{v \in Y \mid \exists u\quad uRv\}&& \text{``область значений $R$''}\\
            R[U] &:= range(R \cap (U \times Y))\\
            R^{-1} &:= \{(y, x) \mid (x, y) \in R\}
        \end{align*}
    \end{definition}

    \begin{remark}
        \begin{align*}
            \range(R) = \dom&(R^{-1}) = R[X]\\
            \range(R^{-1}) = \dom&(R) = R^{-1}[Y]
        \end{align*}
    \end{remark}

    \begin{definition}
        Бинарные отношнения можно естественным образом комбинировать: для любых отношений $R$ и $Q$ между $X$ и $Y$, $Y$ и $Z$ соответственно отношение
        \[
            S = R \circ Q := \{(x, z) \in X \times Z \mid \exists y: xRy \wedge yQz\}
        \]
        называется композицией $R$ и $Q$.
    \end{definition}

    \begin{definition}
        \emph{Тождественное отображение} на $X$ --- $id_X := \{(x, x) \mid x \in X\}$.
    \end{definition}

    \begin{remark}
        Тождественное отображение при композиции (не важно, правой или левой) с другим отношением не меняет его. 
    \end{remark}

    \begin{definition}
        Отношение $R$ между $X$ и $Y$ называется функциональным, если
        \[
            \forall x\; \forall y_1\, \forall y_2\, ((xRy_1 \wedge xRy_2) \rightarrow y_1 = y_2).
        \]
    \end{definition}

    \begin{definition}
        \emph{Функция} из $X$ в $Y$ --- функциональное отношение $R$ между $X$ и $Y$, в котором $\dom(R)=X$. Обозначение: $R: X \to Y$.
    \end{definition}

    \begin{definition}
        \emph{Ограничение} или \emph{сужение} функции $f: X \to Y$ на $U \subseteq X$ --- функция $f\upharpoonright_U := f \cap (U \times Y)$.
        
        Если $f: X \to Y$ и $g: U \to Y$, где $U \subseteq X$, таковы, что $f\upharpoonright_U = g$, то $f$ называется \emph{расширением} $g$, а $g$ --- \emph{органичением} $f$.
    \end{definition}

    \begin{definition}
        $Y^X := \{f: X \to Y\}$.
    \end{definition}

    \begin{definition}
        Функция $f: X \to Y$ называется 
        \begin{itemize}
            \item \emph{сюръекцией},  если $range(f) = Y$;
            \item \emph{инъекцией}, если $f^{-1}$ функционально;
            \item \emph{биекцией}, если $f$ сюръективно и инъективно.
        \end{itemize}
    \end{definition}

    \begin{itemize}
        \item[C)] ``Аксиома выбора'':
            \[\forall X (\varnothing \notin X \to \exists f (f: X \to \bigcup X \wedge \forall u \in X (f(u) \in u)))\]
    \end{itemize}

    \section{Натуральные числа и индукция}

    Важным следствием Inf является
    \begin{align*}
        \exists X (\Ind(X) \wedge \forall Y (\Ind(Y) \to X \subseteq Y))&& \text{(Nat)}
    \end{align*}

    Nat описывает минимальное по включению индуктивное множество --- $\NN$, $\aleph_0$ или $\omega$.

    \begin{proof}[Вывод Nat из Inf]
        Пусть есть какое-то индуктивное $X_0$. Тогда рассмотрим
        \[\NN := \{x \in X_0 \mid \forall X (\Ind(X) \to x \in X)\}\]

        По построению $\Ind(X) \rightarrow \NN \subseteq X$. Также $\Ind(\NN)$.
    \end{proof}

    \begin{definition}
        Определим \emph{функцию последователя} $s: \NN \to NN$ как
        \[s := \{(n, m) \in \NN \times \NN \mid m = n \cup \{n\}\}\]
        Вместо $s(n)$ часто пишут $n+1$.
    \end{definition}

    \begin{definition}
        \emph{(Естественный) порядок} на $\NN$ --- $< := \{(n, m) \in \NN^2 \mid n \in m\}$.
    \end{definition}

    \begin{remark}
        Для всех $n, m \in \NN$ верно:
        \begin{enumerate}
            \item $\neg (n < 0)$;
            \item $n < m + 1 \leftrightarrow (n < m \vee n = m)$.
        \end{enumerate}
    \end{remark}

    \begin{theorem}[принцип индукции]
        Пусть $X$ удовлетворяет условию
        \[0 \in X \wedge \forall n \in \NN (n \in X \rightarrow n + 1 \in X).\]
        Тогда $\NN \subseteq X$.
    \end{theorem}

    \begin{proof}
        Из условия на $X$ следует, что $\NN \cap X$ индуктивно. Тогда из определения $\NN$ следует, что $\NN \subseteq \NN \cap X \subseteq X$, значит $\NN \subseteq X$.
    \end{proof}

    \begin{remark}
        В качестве $X$ могут быть $\{n \in \NN \mid \Phi(n)\}$.
    \end{remark}

    \begin{corollary}
        $\forall n \in \NN$ верно $n \subseteq \NN$.
    \end{corollary}

    \begin{theorem}[возвратная индукция]
        Пусть дан $X$, что $\forall n \in \NN (\forall m < n\; m \in X \rightarrow n \in X)$. Тогда $\NN \subseteq X$.
    \end{theorem}

    \begin{proof}
        Докажем, что $\forall n \in \NN n \subseteq X$, по индукции. База для $0$ очевидна. Шаг очевиден, так как $n \subseteq X$, значит $n \in X$, значит $n + 1 \subseteq X$.  
    \end{proof}

    \begin{definition}
        $\Min(X) := \{x \in X \mid \neg \exists u \in X u \in x\}$.
    \end{definition}

    \begin{theorem}[принцип минимального элемента]
        Если $X \subset \NN$ и $X \neq \varnothing$, то $\Min(X) \neq \varnothing$.
    \end{theorem}

    \begin{proof}
        Пусть $\Min(X) = \varnothing$. Возьмём $Y := \NN \setminus X$. Заметим, что
        \[\forall n \in \NN (\forall m < n\; m \in Y \rightarrow n \in Y)\]
        Тогда по принципу возвратной индукции $Y = \NN$, а тогда $X = \varnothing$ --- противоречие.
    \end{proof}

    \begin{theorem}[о рекурсии]
        Пусть есть $y_0 \in Y$ и $h: \NN \times Y \to Y$. Тогда существует и единственная $f: \NN \to Y$ такая, что для любого $n \in \NN$
        \[f(n) = \left\{\begin{aligned}
            &y_0&&\text{если }n = 0\\
            &h(m, f(m))&&\text{если }n = m + 1
        \end{aligned}\right.\]
    \end{theorem}

    \begin{proof}
        Пусть $k \in \NN$. Тогда будем называть функцию $f: k+1 \to Y$ \emph{правильной}, если условие в определении рекурсии верно для всех $n \in k + 1$. Также рассмотрим
        \[S := \{k \in \NN \mid \text{сущесвтует единственная правильная $f: k + 1 \to Y$}\}\]
        Будем обозначать для каждого $k \in S$ через $f_k$ соответствующую правильную функцию из $k+1$ в $Y$.

        Докажем по индукции, что $S = \NN$.

        \textbf{База.} Очевидно, $\{(0, y_0)\}$ --- единственная правильная функция из $0+1$ в $Y$. Поэтому $0 \in S$.

        \textbf{Шаг.} Легко заметить, что сужение любой правильной функции на $k+2$ на множество $k+1$ правильно. Поэтому все правильные функции на $k+2$ определены на $k+1$ как $f_k$. Тогда значение в $k+1$ определяется однозначно, значит правильная функция на $k+2$ существует и единственна. 
    \end{proof}

    \begin{theorem}[о рекурсии, парамметризованная]
        Пусть $g_0 \in Y^X$ и $h: X \times \NN \times Y \to Y$. Тогда существует и единственна $f: X \times \NN \to Y$, что $\forall x \in X, n \in \NN$
        \[f(x, n) = \left\{\begin{aligned}
            &g_0(x)&&\text{если }n=0\\
            &h(x, m ,f(x, m))&&\text{если }n=m+1
        \end{aligned}\right.\]
    \end{theorem}

    \begin{proof}
        Рассмотрим для каждого $x \in X$ функцию $h_x: \NN \times Y \to Y, (n, y) \mapsto h(x, n, y)$. Тогда по теореме о рекурсии есть $f_x: \NN \to Y$, что
        \[f_x(n) = \left\{\begin{aligned}
            &g_0(x)&&\text{если $n=0$}\\
            &h_x(m, f_x(m))&&\text{если $n=m+1$}
        \end{aligned}\right.\]
        Тогда определим $f: X \times \NN \to Y, (x, n) \mapsto f_x(n)$. В этом случае
        \[f(x, n) = f_x(n) = \left\{\begin{aligned}
            &g_0(x)&&\text{если $n=0$}\\
            &h_x(m, f_x(m))&&\text{если $n=m+1$}
        \end{aligned}\right.=\left\{\begin{aligned}
            &g_0(x)&&\text{если $n=0$}\\
            &h(x, m, f(x, m))&&\text{если $n=m+1$}
        \end{aligned}\right.\]
    \end{proof}


    \begin{remark}
        Заметим, что с помощью ткоремы о параметризованной рекурсии можно определить сложение, умножение и возведение в степень на натуральных числах.
    \end{remark}

    \begin{definition}
        Несложно заметить, что функциональные отношения $R \subseteq X \times Y$ --- функции из подмножества $X$ в $Y$. Поэтому будем называть их \emph{частичными функциями} и обозначать как $R: \subseteq X \to Y$.
    \end{definition}

    \begin{theorem}[о рекурсии, частичной]
        Пусть $y_0 \in Y$ и $h: \subseteq \NN \times Y \to Y$. Тогда существует и единственна $f: \subseteq \NN \to Y$, что
        \begin{itemize}
            \item для любого $n \in \dom(f)$,
                \[f(n) = \left\{\begin{aligned}
                    &y_0 && \text{если $n = 0$}\\
                    &h(m, f(m)) && \text{если $n = m + 1$}
                \end{aligned}\right.\]
            \item либо $\dom(f) = \NN$, либо $\dom(f) = k + 1$ для некоторого $k \in \NN$, что $(k, f(k)) \notin \dom(h)$.
        \end{itemize}
    \end{theorem}

    \begin{proof}
        Зафиксируем некоторое $\text{ы} \notin Y$ и положим $Y' := Y \cup \{\text{ы}\}$. Теперь расширим $h$ до $h': \NN \times Y' \to Y'$ следующим образом:
        \[h'(n, y') := \left\{\begin{aligned}
            &h(n, y') && \text{если $(n, y') \in \dom(h)$}\\
            &\text{ы} && \text{иначе}
        \end{aligned}\right.\]
        В силу теоремы о рекурсии существует и единственна $f': \NN \to Y'$ такая, что для любого $n \in \NN$,
        \[f'(n) = \left\{\begin{aligned}
            &y_0 && \text{если $n=0$}\\
            &h'(m, f'(m)) && \text{если $n=m+1$}
        \end{aligned}\right.\]
        Возьмём $f := f' \cup (\NN \times Y)$. Несложно убедиться, что $f$ будет искомой.
    \end{proof}

    \begin{definition}
        \emph{Конечными последовательностями элементов} $X$ называются элементы множества $X^* := \{f \mid \exists n \in \NN (f: n \to X)\}$.
    \end{definition}

    \begin{theorem}[о возвратной индукции]
        Пусть $h: \NN \times Y^* \to Y$. Тогда существует единственная $f: \NN \to Y$ такая, что для любого $n \in \NN$, $f(n) = h(n, f\upharpoonright_n)$.
    \end{theorem}

    \begin{proof}
        По аналогии с доказательством теоремы о рекурсии, однако вместообычной индукции тут используется возвратная. [\dots]
    \end{proof}

    \section{Мощности}

    \begin{definition}
        $X$ и $Y$ \emph{равномощны}, если существует биекция $f: X \to Y$. Обозначение: $X \sim Y$.
    \end{definition}

    \begin{theorem}
        Для всех $X$, $Y$ и $Z$ верно следующее:
        \begin{enumerate}
            \item $X \sim X$;
            \item $X \sim Y \Leftrightarrow Y \sim X$;
            \item $X \sim Y \sim Z \Rightarrow X \sim Z$.
        \end{enumerate}
    \end{theorem}

    \begin{example}
        $\Pcal(X) \sim 2^X$. Действительно, рассмотрим для каждого $Y \subseteq X$ функцию $\chi_Y: X \to 2$, что
        \[\chi_Y(x) := \left\{\begin{aligned}
            &1 && \text{если $x\in Y$}\\
            &0 && \text{если $x \in X \setminus Y$}
        \end{aligned}\right.\]
        Несложно заметить, что отображение, сопоставляющее $Y$ функцию $\chi_Y$ есть биекция из $\Pcal(x)$ в $2^X$.
    \end{example}

    \begin{definition}
        Множество $X$ \emph{по мощности менее или равно} $Y$ ($X \preccurlyeq Y$), если существует инъекция из $X$ в $Y$.

        Множество $X$ \emph{по мощности (строго) менее} $Y$ ($X \prec Y$), если $X \preccurlyeq Y \wedge X \nsim Y$.
    \end{definition}

    \begin{remark}
        Тогда очевидно, что $X \preccurlyeq Y$ тогда и только тогда, когда $X$ равномощно некоторому подмножеству $Y$.
    \end{remark}

    \begin{theorem}\ 
        \begin{enumerate}
            \item $X \preccurlyeq X$.
            \item $X \sim Y \Rightarrow X \preccurlyeq Y$.
            \item $X \preccurlyeq Y \sim Z \Rightarrow X \preccurlyeq Z$.
            \item $X \sim Y \preccurlyeq Z \Rightarrow X \preccurlyeq Z$.
            \item $X \preccurlyeq Y \preccurlyeq Z \Rightarrow X \preccurlyeq Z$.
        \end{enumerate}
    \end{theorem}

    \begin{theorem}[Кантора, обобщённая]
        $X \prec \Pcal(X)$.
    \end{theorem}

    \begin{proof}
        Очевидно, что $f: X \to \Pcal(X, x \mapsto \{x\}$ есть инъекция, поэтому $X \preccurlyeq \Pcal(X)$. Покажем, что между ними нет биекции.

        Предположим противное, т.е. есть биекция $f: X \to \Pcal(X)$. Рассмотрим $Y := \{x \in X \mid x \notin f(x)\}$. Поскольку $f$ --- биекция, то $f(y) = Y$ для некоторого $Y$. В итоге мы получаем
        \[
            y \in Y \qquad
            \Longleftrightarrow \qquad
            y \notin f(Y) \qquad
            \Longleftrightarrow \qquad
            y \notin Y
        \]
        Получаем противоречие.
    \end{proof}

    \begin{theorem}[Кантора-Шрёдера-Бернштейна]
        Если $X \preccurlyeq Y$ и $Y \preccurlyeq X$, то $X \sim Y$.
    \end{theorem}

    \begin{proof}
        \begin{lemma}\label{CSB-th-lemma}
            Если $X \supseteq Y \supseteq X'$ и $X \sim X'$, то $X \sim Y \sim X'$.
        \end{lemma}

        \begin{proof}
            Пусть $f: X \to X'$ --- биекция. Определимм по рекурсии $\{X_i\}_{i=0}^\infty$ и $\{Y_i\}_{i=0}^\infty$:
            \begin{align*}
                X_n &:= \left\{\begin{aligned}
                    &X && \text{если $n = 0$}\\
                    &f[X_m] && \text{если $n=m+1$}
                \end{aligned}\right.&
                Y_n &:= \left\{\begin{aligned}
                    &Y && \text{если $n = 0$}\\
                    &f[Y_m] && \text{если $n=m+1$}
                \end{aligned}\right.
            \end{align*}

            По условию $X_0 = X \supseteq Y = Y_0$ и $Y_0 = Y \supseteq X' = f(X) = X_1$. Тогда несложно убедиться по индукции по $n$, что $X_n \supseteq Y_n \supseteq X_{n+1}$, так как $X_{n-1} \supseteq Y_{n-1} \supseteq X_n$, значит $f(X_{n-1}) \supseteq f(Y_{n-1}) \supseteq f(X_n)$, что буквально означает, что $X_n \supseteq Y_n \supseteq X_{n+1}$.

            Тогда для каждого $n \in \NN$ определим $U_n := X_n \setminus Y_n$. Пусть также $U := \bigcup_{n=0}^\infty U_n$, $Z := X \setminus U$.

            Несложно видеть, что
            \begin{align*}
                X &= \bigcup_{n=0}^\infty U_n \cup Z&
                Y &= \bigcup_{n=1}^\infty U_n \cup Z
            \end{align*}
            Также несложно видеть, что $f[U_n] = f[X_n \setminus Y_n] = f[X_n] \setminus f[Y_n] = X_{n+1} \setminus Y_{n+1} = U_{n+1}$, а потому $f[U] = U\setminus U_0$.

            Тогда определим $g: X \to X$ по правилу
            \[g(x) := \begin{cases}
                f(x) & \text{если $x \in U$}\\
                x & \text{если $x \in Z$}
            \end{cases}\]
            Несложно видеть, что это инъекция. Действительно, $g$ на $U$ равна $f$, а значит есть бииекция из $U$ в $U\setminus U_0$, также является биекцией из $Z$ в себя, а поскольку $U$ и $Z$ дизъюнктны, то $g$ является биекцией из $U \cup Z$ в $U\setminus U_0 \cup Z$, т.е. из $X$ в $Y$. Значит $Y \sim X$.
        \end{proof}

        Пусть $f: X \to Y$ и $g: Y \to X$ --- инъекции. Несложно видеть, что $g[Y] \subseteq X$, а $f[X] \subseteq Y$, значит $g[f[X]] \subseteq g[Y]$. Т.е. $X \supseteq g[Y] \supseteq g[f[X]]$. При этом $X \sim f[X] \sim g[f[X]]$, поэтому применяя лемму \ref{CSB-th-lemma}, имеем, что $X \sim g[Y] \sim Y$, значит $X \sim Y$.
    \end{proof}
\end{document}