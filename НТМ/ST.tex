\documentclass[12pt,a4paper]{article}
\usepackage{math-text}
\usepackage{stmaryrd}

\title{Основы наивной теории множеств.}
\author{Лектор --- \href{https://users.math-cs.spbu.ru/~speranski}{Станислав Олегович Сперанский} \\
        Создатель конспекта --- Глеб Минаев
        \footnote{Оригинал конспекта опубликован расположен \href{https://github.com/lounres/SPbU-MCS-2020-M-lecture-notes}{GitHub}}}
\date{}

\newcommand{\subsets}{\ensuremath{\mathcal{P}}\xspace}
\newcommand{\finsubsets}{\ensuremath{\mathcal{P_{\mathrm{fin}}}}\xspace}
\DeclareMathOperator{\Ind}{Ind}
\DeclareMathOperator{\dom}{dom}
\DeclareMathOperator{\range}{range}
\DeclareMathOperator{\Min}{Min}
\DeclareMathOperator{\Seq}{Seq}
\DeclareMathOperator{\Left}{left}
\DeclareMathOperator{\Right}{right}
\DeclareMathOperator{\IS}{IS}

\begin{document}
    \maketitle

    Материалы лекций: \href{https://users.math-cs.spbu.ru/~speranski/courses/sets-2020-autumn/materials.html}{ссылка}
    
    Литература:
    \begin{itemize}
        \item K. Hrbacek and T. Jech. Introduction to Set Theory. 3rd ed., revised and expanded. Marcel Dekker, Inc., 1999.
        \item T. Jech. Set Theory. 3rd ed., revised and expanded. Springer, 2002.
    \end{itemize}

    Будем рассматривать как базовые выражения ``$x$ равен (совпадает с) $y$'' (``$x=y$'') ``$x$ лежит в $y$'' (``$x\in y$'').

    \begin{definition}[Наиваная схема аксиом выделения]
        Пусть $\Phi(x)$ --- произвольное условие на объекты. Тогда существует $X$, что $\forall u (\Phi(u) \leftrightarrow u \in X)$. В этом случае $X$ обозначается как $\{u \mid \Phi(u)\}$.
    \end{definition}

    \begin{statement}[парадокс Рассела]
        Пусть $R = \{u \mid u \notin u\}$. Тогда $R$ не может лежать в себе и не может не лежать в себе одновременно.
    \end{statement}

    \begin{statement}[парадокс Берри]
        Пусть $n$ --- наименьшее натуральное число, которое нельзя описать менее чем одиннадцатью словами. Тогда $n$ описывается 10 словами.
    \end{statement}

    Из-за данного парадокса будем рассматривать только условия, образованные переменными и $\in$, $=$, $\neg$, $\wedge$, $\vee$, $\leftarrow$, $\leftrightarrow$, $\forall$, $\exists$.

    \begin{definition}[аксиомы ZFC (= ZF (аксиомы Цермело-Френкеля) + C (аксиома выбора))]\ 
        \begin{description}
            \item[Ext)] ``Аксиома экстенциональности'':
                \[\forall X \forall Y (\forall u (u \in X \leftrightarrow u \in Y) \leftrightarrow X=Y)\]
            \item[Empty)] ``Аксиома пустого множества'':
                \[\exists \varnothing\; \forall u\, (u \notin \varnothing)\]
            \item[Pair)] ``Аксиома пары'':
                \[\forall X\, \forall Y\; \exists Z (\forall u\, (u \in Z \leftrightarrow (u = X \vee u = Y)))\]
                Обозначение: $Z = \{X, Y\}$.
            \item[Sep)] ``Схема аксиом выделения'':
                \[\forall \Phi(x)\quad \forall X\, \exists Y\; \forall u\, (u\in Y \leftrightarrow (u \in X \wedge \Phi(u)))\]
                Обозначение: $Y = \{u \in X \mid \Phi(u)\}$.

                \begin{corollary*}
                    Операторы
                    \begin{align*}
                        X \cap Y &:= \{u \mid u \in X \wedge u \in Y\}\\
                        X \setminus Y &:= \{u \in X \mid u \notin Y\}\\
                        \bigcap X &:= \{u \mid \forall v \in X \quad u \in v\}
                    \end{align*}
                    определены корректно.
                \end{corollary*}
            \item[Union)] ``Аксиома объединения'':
                \[\forall X\, \exists Y\; \forall u\, (u \in Y \leftrightarrow \exists v\, (v \in X \wedge u \in v))\]
                Обозначение: $Y=\bigcup X$.

                \begin{corollary*}
                    Оператор
                    \[
                        X \cup Y := \bigcup \{X, Y\} = \{u \mid u \in X \wedge u \in Y\}
                    \]
                    определён корректно.
                \end{corollary*}
            \item[Power)] Пусть $x \subseteq y := \forall v\, \{v \in x \rightarrow v \in y\}$. ``Аксиома степени'':
                \[
                    \forall X\, \exists Y\; \forall u\, (u \in Y \leftrightarrow u \subseteq X)
                \]
                Обозначение: $Y = \subsets(X) := \{u \mid u \subseteq X\}$.
                $\subsets(X)$ --- ``множество-степень X'' или ``булеан X''.

                \begin{definition}
                    Упорядоченная пара --- это объект от некоторых $X_1$ и $Y_1$, который равен другому такому объекту от $X_2$ и $Y_2$ тогда и только тогда, когда $X_1 = X_2 \wedge Y_1 = Y_2$.
                \end{definition}

                \begin{definition}
                    \emph{Декартово произведение} $X$ и $Y$ ($X \times Y$) --- $\{(x; y) \mid x \in X \wedge y \in Y\}$. 
                \end{definition}

                \begin{remark}
                    Можно несложно показать, что декартово произведение определено корректно.
                \end{remark}
            \item[Inf)] Пусть $\Ind(X) := \varnothing \in X \wedge \forall u\, (u \in X \wedge u \cup \{u\} \in X)$. Если $\Ind(X)$, то $X$ называется индуктивным. ``Аксиома бесконечности'': существует индуктивное множество.
            \item[Repl)] ``Схема аксиом подстановки'':
                \begin{align*}
                    \forall \Phi(x, y)\;&\\
                    &\forall x\, \forall y_1\, \forall y_2\, ((\Phi(x, y_1) \wedge \Phi(x, y_2)) \rightarrow y_1 = y_2) \rightarrow\\
                    &\forall X\, \exists Y\; \forall y\, (y \in Y \leftrightarrow \exists x (x \in X \wedge \Phi(x, y)))
                \end{align*}
            \item[Reg)] ``Аксиома регулярности'':
                \[
                    \forall X\, (X\neq \varnothing \rightarrow \exists u\, (u\in X \wedge X \cap u = \varnothing))
                \]
        \end{description}
    \end{definition}

    \section{Отношения.}

    \begin{definition}
        \emph{Бинарное (или двухместное) отношение} $R$ между $X$ и $Y$ --- подмножество $X \times Y$. Если $Y = X$, $R$ называется \emph{бинарным (или двухместным) отношением} на $X$.\\
        Обозначение: $(x, y) \in R \Leftrightarrow xRy$.
    \end{definition}

    \begin{definition}
        \begin{align*}
            \dom(R) &:= \{u \in X \mid \exists v\quad uRv\}&& \text{``область определения $R$''}\\
            \range(R) &:= \{v \in Y \mid \exists u\quad uRv\}&& \text{``область значений $R$''}\\
            R[U] &:= \range(R \cap (U \times Y))\\
            R^{-1} &:= \{(y, x) \mid (x, y) \in R\}
        \end{align*}
    \end{definition}

    \begin{remark}
        \begin{align*}
            \range(R) = \dom&(R^{-1}) = R[X]\\
            \range(R^{-1}) = \dom&(R) = R^{-1}[Y]
        \end{align*}
    \end{remark}

    \begin{definition}
        Бинарные отношения можно естественным образом комбинировать: для любых отношений $R$ и $Q$ между $X$ и $Y$, $Y$ и $Z$ соответственно отношение
        \[
            S = R \circ Q := \{(x, z) \in X \times Z \mid \exists y: xRy \wedge yQz\}
        \]
        называется композицией $R$ и $Q$.
    \end{definition}

    \begin{definition}
        \emph{Тождественное отображение} на $X$ --- $id_X := \{(x, x) \mid x \in X\}$.
    \end{definition}

    \begin{remark}
        Тождественное отображение при композиции (не важно, правой или левой) с другим отношением не меняет его. 
    \end{remark}

    \begin{definition}
        Отношение $R$ между $X$ и $Y$ называется функциональным, если
        \[
            \forall x\; \forall y_1\, \forall y_2\, ((xRy_1 \wedge xRy_2) \rightarrow y_1 = y_2).
        \]
    \end{definition}

    \begin{definition}
        \emph{Функция} из $X$ в $Y$ --- функциональное отношение $R$ между $X$ и $Y$, в котором $\dom(R)=X$. Обозначение: $R: X \to Y$.
    \end{definition}

    \begin{definition}
        \emph{Ограничение} или \emph{сужение} функции $f: X \to Y$ на $U \subseteq X$ --- функция $f\upharpoonright_U := f \cap (U \times Y)$.
        
        Если $f: X \to Y$ и $g: U \to Y$, где $U \subseteq X$, таковы, что $f\upharpoonright_U = g$, то $f$ называется \emph{расширением} $g$, а $g$ --- \emph{ограничением} $f$.
    \end{definition}

    \begin{definition}
        $Y^X := \{f: X \to Y\}$.
    \end{definition}

    \begin{definition}
        Функция $f: X \to Y$ называется 
        \begin{itemize}
            \item \emph{сюръекцией},  если $range(f) = Y$;
            \item \emph{инъекцией}, если $f^{-1}$ функционально;
            \item \emph{биекцией}, если $f$ сюръективно и инъективно.
        \end{itemize}
    \end{definition}

    \begin{itemize}
        \item[C)] ``Аксиома выбора'':
            \[\forall X (\varnothing \notin X \to \exists f (f: X \to \bigcup X \wedge \forall u \in X (f(u) \in u)))\]
    \end{itemize}

    \section{Натуральные числа и индукция}

    Важным следствием Inf является
    \begin{align*}
        \exists X (\Ind(X) \wedge \forall Y (\Ind(Y) \to X \subseteq Y))&& \text{(Nat)}
    \end{align*}

    Nat описывает минимальное по включению индуктивное множество --- $\NN$, $\aleph_0$ или $\omega$.

    \begin{proof}[Вывод Nat из Inf]
        Пусть есть какое-то индуктивное $X_0$. Тогда рассмотрим
        \[\NN := \{x \in X_0 \mid \forall X (\Ind(X) \to x \in X)\}\]

        По построению $\Ind(X) \rightarrow \NN \subseteq X$. Также $\Ind(\NN)$.
    \end{proof}

    \begin{definition}
        Определим \emph{функцию последователя} $s: \NN \to NN$ как
        \[s := \{(n, m) \in \NN \times \NN \mid m = n \cup \{n\}\}\]
        Вместо $s(n)$ часто пишут $n+1$.
    \end{definition}

    \begin{definition}
        \emph{(Естественный) порядок} на $\NN$ --- $< := \{(n, m) \in \NN^2 \mid n \in m\}$.
    \end{definition}

    \begin{remark}
        Для всех $n, m \in \NN$ верно:
        \begin{enumerate}
            \item $\neg (n < 0)$;
            \item $n < m + 1 \leftrightarrow (n < m \vee n = m)$.
        \end{enumerate}
    \end{remark}

    \begin{theorem}[принцип индукции]
        Пусть $X$ удовлетворяет условию
        \[0 \in X \wedge \forall n \in \NN (n \in X \rightarrow n + 1 \in X).\]
        Тогда $\NN \subseteq X$.
    \end{theorem}

    \begin{proof}
        Из условия на $X$ следует, что $\NN \cap X$ индуктивно. Тогда из определения $\NN$ следует, что $\NN \subseteq \NN \cap X \subseteq X$, значит $\NN \subseteq X$.
    \end{proof}

    \begin{remark}
        В качестве $X$ могут быть $\{n \in \NN \mid \Phi(n)\}$.
    \end{remark}

    \begin{corollary}
        $\forall n \in \NN$ верно $n \subseteq \NN$.
    \end{corollary}

    \begin{theorem}[возвратная индукция]
        Пусть дан $X$, что $\forall n \in \NN (\forall m < n\; m \in X \rightarrow n \in X)$. Тогда $\NN \subseteq X$.
    \end{theorem}

    \begin{proof}
        Докажем, что $\forall n \in \NN n \subseteq X$, по индукции. База для $0$ очевидна. Шаг очевиден, так как $n \subseteq X$, значит $n \in X$, значит $n + 1 \subseteq X$.  
    \end{proof}

    \begin{definition}
        $\Min(X) := \{x \in X \mid \neg \exists u \in X u \in x\}$.
    \end{definition}

    \begin{theorem}[принцип минимального элемента]
        Если $X \subset \NN$ и $X \neq \varnothing$, то $\Min(X) \neq \varnothing$.
    \end{theorem}

    \begin{proof}
        Пусть $\Min(X) = \varnothing$. Возьмём $Y := \NN \setminus X$. Заметим, что
        \[\forall n \in \NN (\forall m < n\; m \in Y \rightarrow n \in Y)\]
        Тогда по принципу возвратной индукции $Y = \NN$, а тогда $X = \varnothing$ --- противоречие.
    \end{proof}

    \begin{theorem}[о рекурсии]
        Пусть есть $y_0 \in Y$ и $h: \NN \times Y \to Y$. Тогда существует и единственная $f: \NN \to Y$ такая, что для любого $n \in \NN$
        \[f(n) = \left\{\begin{aligned}
            &y_0&&\text{если }n = 0\\
            &h(m, f(m))&&\text{если }n = m + 1
        \end{aligned}\right.\]
    \end{theorem}

    \begin{proof}
        Пусть $k \in \NN$. Тогда будем называть функцию $f: k+1 \to Y$ \emph{правильной}, если условие в определении рекурсии верно для всех $n \in k + 1$. Также рассмотрим
        \[S := \{k \in \NN \mid \text{существует единственная правильная $f: k + 1 \to Y$}\}\]
        Будем обозначать для каждого $k \in S$ через $f_k$ соответствующую правильную функцию из $k+1$ в $Y$.

        Докажем по индукции, что $S = \NN$.

        \textbf{База.} Очевидно, $\{(0, y_0)\}$ --- единственная правильная функция из $0+1$ в $Y$. Поэтому $0 \in S$.

        \textbf{Шаг.} Легко заметить, что сужение любой правильной функции на $k+2$ на множество $k+1$ правильно. Поэтому все правильные функции на $k+2$ определены на $k+1$ как $f_k$. Тогда значение в $k+1$ определяется однозначно, значит правильная функция на $k+2$ существует и единственна. 
    \end{proof}

    \begin{theorem}[о рекурсии, параметризованная]
        Пусть $g_0 \in Y^X$ и $h: X \times \NN \times Y \to Y$. Тогда существует и единственна $f: X \times \NN \to Y$, что $\forall x \in X, n \in \NN$
        \[f(x, n) = \left\{\begin{aligned}
            &g_0(x)&&\text{если }n=0\\
            &h(x, m ,f(x, m))&&\text{если }n=m+1
        \end{aligned}\right.\]
    \end{theorem}

    \begin{proof}
        Рассмотрим для каждого $x \in X$ функцию $h_x: \NN \times Y \to Y, (n, y) \mapsto h(x, n, y)$. Тогда по теореме о рекурсии есть $f_x: \NN \to Y$, что
        \[f_x(n) = \left\{\begin{aligned}
            &g_0(x)&&\text{если $n=0$}\\
            &h_x(m, f_x(m))&&\text{если $n=m+1$}
        \end{aligned}\right.\]
        Тогда определим $f: X \times \NN \to Y, (x, n) \mapsto f_x(n)$. В этом случае
        \[f(x, n) = f_x(n) = \left\{\begin{aligned}
            &g_0(x)&&\text{если $n=0$}\\
            &h_x(m, f_x(m))&&\text{если $n=m+1$}
        \end{aligned}\right.=\left\{\begin{aligned}
            &g_0(x)&&\text{если $n=0$}\\
            &h(x, m, f(x, m))&&\text{если $n=m+1$}
        \end{aligned}\right.\]
    \end{proof}


    \begin{remark}
        Заметим, что с помощью теоремы о параметризованной рекурсии можно определить сложение, умножение и возведение в степень на натуральных числах.
    \end{remark}

    \begin{definition}
        Несложно заметить, что функциональные отношения $R \subseteq X \times Y$ --- функции из подмножества $X$ в $Y$. Поэтому будем называть их \emph{частичными функциями} и обозначать как $R: \subseteq X \to Y$.
    \end{definition}

    \begin{theorem}[о рекурсии, частичной]
        Пусть $y_0 \in Y$ и $h: \subseteq \NN \times Y \to Y$. Тогда существует и единственна $f: \subseteq \NN \to Y$, что
        \begin{itemize}
            \item для любого $n \in \dom(f)$,
                \[f(n) = \left\{\begin{aligned}
                    &y_0 && \text{если $n = 0$}\\
                    &h(m, f(m)) && \text{если $n = m + 1$}
                \end{aligned}\right.\]
            \item либо $\dom(f) = \NN$, либо $\dom(f) = k + 1$ для некоторого $k \in \NN$, что $(k, f(k)) \notin \dom(h)$.
        \end{itemize}
    \end{theorem}

    \begin{proof}
        Зафиксируем некоторое $\text{ы} \notin Y$ и положим $Y' := Y \cup \{\text{ы}\}$. Теперь расширим $h$ до $h': \NN \times Y' \to Y'$ следующим образом:
        \[h'(n, y') := \left\{\begin{aligned}
            &h(n, y') && \text{если $(n, y') \in \dom(h)$}\\
            &\text{ы} && \text{иначе}
        \end{aligned}\right.\]
        В силу теоремы о рекурсии существует и единственна $f': \NN \to Y'$ такая, что для любого $n \in \NN$,
        \[f'(n) = \left\{\begin{aligned}
            &y_0 && \text{если $n=0$}\\
            &h'(m, f'(m)) && \text{если $n=m+1$}
        \end{aligned}\right.\]
        Возьмём $f := f' \cup (\NN \times Y)$. Несложно убедиться, что $f$ будет искомой.
    \end{proof}

    \begin{definition}
        \emph{Конечными последовательностями элементов} $X$ называются элементы множества $X^* := \{f \mid \exists n \in \NN (f: n \to X)\}$.
    \end{definition}

    \begin{theorem}[о возвратной индукции]
        Пусть $h: \NN \times Y^* \to Y$. Тогда существует единственная $f: \NN \to Y$ такая, что для любого $n \in \NN$, $f(n) = h(n, f\upharpoonright_n)$.
    \end{theorem}

    \begin{proof}
        По аналогии с доказательством теоремы о рекурсии, однако вместо обычной индукции тут используется возвратная. [\dots]
    \end{proof}

    \begin{definition}
        Условие $\Phi(x, y)$ называется \emph{функциональным}, если
        \[\forall x \forall y_1 \forall y_2\; ((\Phi(x, y_1) \wedge \Phi(x, y_2)) \rightarrow y_1 = y_2)\]
        Если для некоторого $u$ нашёлся тот самый $y$, что $\Phi(u, y)$, тогда данный $y$ обозначается как $\llbracket \Phi \rrbracket (x)$.

        Функциональное условие $\Phi(x, y)$ называется \emph{тотальным}, если $\forall x \exists y\; \Phi(x, y)$.
    \end{definition}

    \begin{theorem}[о возвратной ``классовой рекурсии'']
        Пусть $\Phi(x, y)$ --- тотальное функциональное условие. Тогда существует единственная функция $f$ с $\dom(f) = \NN$, что $\forall n \in \NN$
        \[f(n) = \llbracket \Phi \rrbracket (f\upharpoonright_n)\]
    \end{theorem}

    \begin{proof}
        Идея здесь та же, хотя деталей побольше. В нашем модуле эта теорема не будет играть особой роли, однако именно ``классовая рекурсия'' является базовым инструментом в ТМ. [...]
    \end{proof}

    \section{Мощности}

    \begin{definition}
        $X$ и $Y$ \emph{равномощны}, если существует биекция $f: X \to Y$. Обозначение: $X \sim Y$.
    \end{definition}

    \begin{theorem}
        Для всех $X$, $Y$ и $Z$ верно следующее:
        \begin{enumerate}
            \item $X \sim X$;
            \item $X \sim Y \Leftrightarrow Y \sim X$;
            \item $X \sim Y \sim Z \Rightarrow X \sim Z$.
        \end{enumerate}
    \end{theorem}

    \begin{example}
        $\subsets(X) \sim 2^X$. Действительно, рассмотрим для каждого $Y \subseteq X$ функцию $\chi_Y: X \to 2$, что
        \[\chi_Y(x) := \left\{\begin{aligned}
            &1 && \text{если $x\in Y$}\\
            &0 && \text{если $x \in X \setminus Y$}
        \end{aligned}\right.\]
        Несложно заметить, что отображение, сопоставляющее $Y$ функцию $\chi_Y$ есть биекция из $\subsets(x)$ в $2^X$.
    \end{example}

    \begin{definition}
        Множество $X$ \emph{по мощности менее или равно} $Y$ ($X \preccurlyeq Y$), если существует инъекция из $X$ в $Y$.

        Множество $X$ \emph{по мощности (строго) менее} $Y$ ($X \prec Y$), если $X \preccurlyeq Y \wedge X \nsim Y$.
    \end{definition}

    \begin{remark}
        Тогда очевидно, что $X \preccurlyeq Y$ тогда и только тогда, когда $X$ равномощно некоторому подмножеству $Y$.
    \end{remark}

    \begin{theorem}\ 
        \begin{enumerate}
            \item $X \preccurlyeq X$.
            \item $X \sim Y \Rightarrow X \preccurlyeq Y$.
            \item $X \preccurlyeq Y \sim Z \Rightarrow X \preccurlyeq Z$.
            \item $X \sim Y \preccurlyeq Z \Rightarrow X \preccurlyeq Z$.
            \item $X \preccurlyeq Y \preccurlyeq Z \Rightarrow X \preccurlyeq Z$.
        \end{enumerate}
    \end{theorem}

    \begin{theorem}[Кантора, обобщённая]
        $X \prec \subsets(X)$.
    \end{theorem}

    \begin{proof}
        Очевидно, что $f: X \to \subsets(X), x \mapsto \{x\}$ есть инъекция, поэтому $X \preccurlyeq \subsets(X)$. Покажем, что между ними нет биекции.

        Предположим противное, т.е. есть биекция $f: X \to \subsets(X)$. Рассмотрим $Y := \{x \in X \mid x \notin f(x)\}$. Поскольку $f$ --- биекция, то $f(y) = Y$ для некоторого $y$. В итоге мы получаем
        \[
            y \in Y \qquad
            \Longleftrightarrow \qquad
            y \notin f(Y) \qquad
            \Longleftrightarrow \qquad
            y \notin Y
        \]
        Получаем противоречие.
    \end{proof}

    \begin{theorem}[Кантора-Шрёдера-Бернштейна]
        Если $X \preccurlyeq Y$ и $Y \preccurlyeq X$, то $X \sim Y$.
    \end{theorem}

    \begin{proof}
        \begin{thlemma}\label{CSB-th-lemma}
            Если $X \supseteq Y \supseteq X'$ и $X \sim X'$, то $X \sim Y \sim X'$.
        \end{thlemma}

        \begin{proof}
            Пусть $f: X \to X'$ --- биекция. Определим по рекурсии $\{X_i\}_{i=0}^\infty$ и $\{Y_i\}_{i=0}^\infty$:
            \begin{align*}
                X_n &:= \left\{\begin{aligned}
                    &X && \text{если $n = 0$}\\
                    &f[X_m] && \text{если $n=m+1$}
                \end{aligned}\right.&
                Y_n &:= \left\{\begin{aligned}
                    &Y && \text{если $n = 0$}\\
                    &f[Y_m] && \text{если $n=m+1$}
                \end{aligned}\right.
            \end{align*}

            По условию $X_0 = X \supseteq Y = Y_0$ и $Y_0 = Y \supseteq X' = f(X) = X_1$. Тогда несложно убедиться по индукции по $n$, что $X_n \supseteq Y_n \supseteq X_{n+1}$, так как $X_{n-1} \supseteq Y_{n-1} \supseteq X_n$, значит $f(X_{n-1}) \supseteq f(Y_{n-1}) \supseteq f(X_n)$, что буквально означает, что $X_n \supseteq Y_n \supseteq X_{n+1}$.

            Тогда для каждого $n \in \NN$ определим $U_n := X_n \setminus Y_n$. Пусть также $U := \bigcup_{n=0}^\infty U_n$, $Z := X \setminus U$.

            Несложно видеть, что
            \begin{align*}
                X &= \bigcup_{n=0}^\infty U_n \cup Z&
                Y &= \bigcup_{n=1}^\infty U_n \cup Z
            \end{align*}
            Также несложно видеть, что $f[U_n] = f[X_n \setminus Y_n] = f[X_n] \setminus f[Y_n] = X_{n+1} \setminus Y_{n+1} = U_{n+1}$, а потому $f[U] = U\setminus U_0$.

            Тогда определим $g: X \to X$ по правилу
            \[g(x) := \begin{cases}
                f(x) & \text{если $x \in U$}\\
                x & \text{если $x \in Z$}
            \end{cases}\]
            Несложно видеть, что это инъекция. Действительно, $g$ на $U$ равна $f$, а значит есть биекция из $U$ в $U\setminus U_0$, также является биекцией из $Z$ в себя, а поскольку $U$ и $Z$ дизъюнктны, то $g$ является биекцией из $U \cup Z$ в $U\setminus U_0 \cup Z$, т.е. из $X$ в $Y$. Значит $Y \sim X$.
        \end{proof}

        Пусть $f: X \to Y$ и $g: Y \to X$ --- инъекции. Несложно видеть, что $g[Y] \subseteq X$, а $f[X] \subseteq Y$, значит $g[f[X]] \subseteq g[Y]$. Т.е. $X \supseteq g[Y] \supseteq g[f[X]]$. При этом $X \sim f[X] \sim g[f[X]]$, поэтому применяя лемму \ref{CSB-th-lemma}, имеем, что $X \sim g[Y] \sim Y$, значит $X \sim Y$.
    \end{proof}

    \begin{definition}
        Будем говорить, что $X$ \emph{имеет $n$ элементов} (где $n \in \NN$), если $X \sim n$.

        $X$ \emph{конечно}, если для какого-то $n\in \NN$, что $X \sim n$.
    \end{definition}

    \begin{statement}
        $X$ бесконечно, значит $\forall n\in\NN\quad |X| \geqslant n$.
    \end{statement}

    \begin{proof}
        Докажем по индукции по $n$.

        \textbf{База:} $|X| \geqslant 0$ --- очевидно.

        \textbf{Шаг:} Пусть $|X| > n$, тогда существует инъекция $f: n \to X$. $f(n) \neq X$, поэтому есть $x \in X\setminus f(n)$, значит есть $f' = f \cup \{(n; x)\}$ --- инъекция из $n+1$ в $X$.
    \end{proof}

    \subsection{Основные свойства конечных множеств}

    \begin{statement}
        $X$ конечно, а $|Y| \leqslant |X|$, то $|Y|$ конечно.
    \end{statement}

    \begin{proof}
        Существует $n \in \NN$, что $|X| = n$. Тогда $Y$ кончено, так как иначе $n = |X| \geqslant |Y| \geqslant n+1$.
    \end{proof}

    \begin{statement}
        Пусть есть сюръекция из $X$ в $Y$, и $X$ конечно. Тогда $|Y| \leqslant |X|$.
    \end{statement}

    \begin{proof}
        WLOG $X=n$ для некоторого $n \in \NN$. Определим $g: Y \to n$ по правилу
        \[
            g(y) := \text{``минимальный элемент в $f^{-1}[\{y\}]$''}
        \]
        Легко понять, что $g: Y \to n$ --- инъекция. Стало быть, $|Y| \geqslant |n| = n$.
    \end{proof}

    \begin{statement}
        Пусть $X$ и $Y$ конечны, причём $X \cup Y = \varnothing$. Тогда $X \cap Y$ конечно и $|X \cup Y| = |X| + |Y|$.
    \end{statement}

    \begin{proof}
        Докажем утверждение индукцией по $|Y|$.

        \textbf{База.} Очевидно, если $|Y| = 0$, то $|Y| = \varnothing$, а потому $|X \cup Y| = |X| = |X| + 0 = |X| + |Y|$.

        \textbf{Шаг.} Пусть $|Y| = n+1$, т.е. существует биекция $f: n+1 \to Y$. Рассмотрим $y = f^{-1}(n)$ и $Z := Y \setminus \{y\}$. Очевидно, что $|Z| = n$. Тогда
        \begin{align*}
            |X \cup Y|
            &= |(X \cup Z) \cup \{y\}|&
            &= |X \cup Z| + 1&
            &= (|X| + |Z|) + 1\\
            &= |X| + (|Z| + 1)&
            &= |X| + |Y|
        \end{align*}
    \end{proof}

    \begin{statement}
        Пусть $X$ и $Y$ конечны. Тогда $X \times Y$ и $X^Y$ кончены и $|X\times Y| = |X|\cdot |Y|$, $|X^Y|=|X|^{|Y|}$.
    \end{statement}

    \subsection{Основные свойства (не более чем) счётных множеств}

    \begin{statement}[в ZFC]
        Пусть $X$ бесконечно, тогда оно содержит счётное подмножество.
    \end{statement}

    \begin{proof}
        Пусть $\eta$ --- какая-нибудь функция выбора для $\subsets(X) \setminus \{\varnothing\}$. Используя рекурсию, определим $f: \NN \to X$ по правилу
        \[f(k) := \eta(X \setminus \range(f \upharpoonright_k))\]
        Как легко видеть, $f: \NN \to X$ --- инъекция. Поэтому $\range(f)$ будет счётным подмножеством $X$.
    \end{proof}

    \begin{definition}
        $\NN$ является кардиналом и обычно обозначается $\aleph_0$.
    \end{definition}

    \begin{corollary}[в ZFC]
        $|X| >\aleph_0$ тогда и только тогда, когда $X$ бесконечно и несчётно.
    \end{corollary}

    \begin{statement}
        $|X| \leqslant \aleph_0$ тогда и только тогда, когда $X$ конечно или счётно. 
    \end{statement}

    \begin{proof}
        Если $X$ конечно или счётно, то, очевидно, $|X| \leqslant \aleph_0$.

        Если $|X| \leqslant \aleph_0$, то WLOG $X \subseteq \NN$. Если $X$ бесконечно, то рекурсивно определим $f: \NN \to X$ по правилу
        \[f(k) := \text{``минимальный элемент в $X \setminus \range(f \upharpoonright_k)$''}\]
        Нетрудно проверить, что $f: \NN \to X$ --- биекция.
    \end{proof}

    \begin{corollary}[в ZFC]
        $|X| \ngtr \aleph_0$ тогда и только тогда, когда $|X| \leqslant \aleph_0$.
    \end{corollary}

    \begin{statement}
        Есть сюръекция из $X$ в $Y$, причём $|X| \leqslant \aleph_0$. Тогда $|Y| \leqslant \aleph_0$.
    \end{statement}

    \begin{proof}
        WLOG $X \subseteq \NN$. Определим $g: Y \to X$ по правилу
        \[g(y) := \text{``минимальный элемент в $f^{-1}[\{y\}]$''}\]
        Легко понять, что $g: Y \to X$ --- инъекция. Стало быть, $|Y| \leqslant |X| \leqslant \aleph_0$.
    \end{proof}

    \begin{corollary}
        Непустое $X$ не более чем счётно тогда и только тогда, когда существует сюръекция из $\NN$ в $X$.
    \end{corollary}

    \begin{corollary}
        Пусть $R$ --- отношение эквивалентности на $X$, причём $X$ не более, чем счётно. Тогда $X/R$ не более чем счётно.
    \end{corollary}

    \begin{statement}
        Пусть $X$ и $Y$ не более чем счётны, тогда $X \times Y$ не более чем счётно.
    \end{statement}

    \begin{proof}
        WLOG $X, Y \subseteq \NN$. Тогда $X \times Y \subseteq \NN \times \NN$, а значит нужно показать, что счётность $\NN \times \NN$. Определим $\nu: \NN \times \NN \to \NN$ по правилу
        \[\nu(n, m) := \frac{(n+m)(n+m+1)}{2} + n\]
        Нетрудно проверить, что $\nu$ биективна.
    \end{proof}

    \begin{corollary} $\forall n \in \NN$
        \[\underbrace{\NN \times \dots \times \NN}_n\]
        счётно.
    \end{corollary}

    \begin{corollary}
        Пусть $X$ и $Y$ не более чем счётны, тогда $X \cup Y$ не более чем счётно.
    \end{corollary}

    \begin{proof}
        Поскольку $X$ и $Y\setminus X$ равномощны некоторым подмножествам $\NN \times \{0\}$ и $\NN \times \{1\}$, то $X \cup Y = X \cup (Y \setminus X)$ равномощно подмножеству $\NN \times \{0, 1\} \subseteq \NN \times \NN$, а потому не более чем счётно.
    \end{proof}

    \begin{statement}
        $X$ конечно, а элементы $X$ не более чем счётны. Тогда $\bigcup X$ не более чем счётно.
    \end{statement}

    \begin{proof}
        По индукции по $|X|$.
    \end{proof}

    \begin{definition} Условие ``быть (бесконечной) последовательностью'' ---
        $\Seq(F) := \exists Y:\quad F: \NN \to Y$.
        Если $\Seq(F)$, то для любого $n \in \NN$ вместо $F(n)$ нередко пишут $F_n$.
    \end{definition}

    \begin{statement}
        Если $F$ --- последовательность последовательностей, то тогда
        \[\bigcup \{\range(F_n)\mid n \in \NN\}\]
        не более чем счётно.
    \end{statement}

    \begin{proof}
        Определим $g: \NN \times \NN \to \bigcup \{\range(F_n)\mid n \in \NN\}$ по правилу
        \[g(n,m) := F_n(m) = F(n)(m)\]
        Легко понять, что $g$ сюръективна.
    \end{proof}

    \begin{corollary}[в ZFC]
        Пусть $X$ не более чем счётно, и все его элементы не более чем счётны, тогда $\bigcup X$ не более чем счётно.
    \end{corollary}

    \begin{proof}
        WLOG $X \neq \varnothing$ и $\varnothing \notin X$. Пусть $g$ --- сюръекция из $\NN$ на $X$. Для каждого $n \in \NN$ положим
        \[S_n := \{f \mid f: \NN \to g(n) \text{ --- сюръекция}\}\]
        Очевидно, $S_n \neq \varnothing$ для всякого $n \in \NN$. Обозначим $\{S_n \mid n \in \NN\}$ через $\mathcal{J}$. Пусть $\eta$ --- какая-нибудь функция выбора для $\mathcal{J}$. Наконец, определим $F: \NN \to \bigcup \mathcal{J}$ по правилу
        \[F(n) := \eta(S_n)\]
        Ясно, что $\bigcup \{\range(F_n) \mid n \in \NN\} = \bigcup \{g(n) \mid n \in \NN\} = \bigcup X$.
    \end{proof}

    \begin{theorem}
        Пусть непустое $X$ не более чем счётно. Тогда $X^*$ счётно.
    \end{theorem}

    \begin{proof}
        Зафиксируем сюръекцию $g: \NN \to X$. Очевидно, $f \circ g \in X^*$ для всякого $f \in \NN^*$. Определим $G: \NN^* \to X^*$ по правилу
        \[G(f) := f \circ g\]
        Легко убедиться, что $G$ сюръективна. Поэтому достаточно показать, что $N^*$ не более чем счётно, а $X^*$ бесконечно.

        Пусть $\nu: \NN \times \NN \to \NN$ --- биекция. Разумеется, можно построить функции $\Left: \NN \to \NN$ и $\Right: \NN \to \NN$ такие, что для любых $n, m \in \NN$,
        \begin{align*}
            \Left(\nu(n,m)) &= n&
            &\text{ и }&
            \Right(\nu(n,m)) &= m
        \end{align*}
        Используя рекурсию, можно определить последовательность последовательностей $f$, удовлетворяющую следующим условиям:
        \begin{align*}
            f_0(i) &= \varnothing\\
            f_{n+1}(i) &= f_n(\Left(i)) \cup \{(n, \Right(i))\}
        \end{align*}
        Далее несложно доказать по индукции, что для каждого $n \in \NN$
        \[\range(f_n) = \{g \mid g: n \to \NN\}\]
        В таком случае $\bigcup \{\range(f_n) \mid n \in \NN\} = \NN^*$. Поэтому $\NN^*$ не более чем счётно.

        Осталось показать, что $X^*$ бесконечно. Для этого выберем какой-нибудь $x_0 \in X$ и определим $h: \NN \to X^*$ по правилу
        \[h(n) := n \times \{x_0\},\]
        т.е. $h(n)$ --- последовательность длины $n$ только из элемента $x_0$. Очевидно, что $h$ инъективна, а потому $X^*$ не может быть конечным.
    \end{proof}

    \begin{definition}
        Для произвольного множества $X$ обозначим
        \[\finsubsets(X) := \{Y \mid Y \subseteq X \text{ и $Y$ конечно}\}\]
        Говоря просто, $\finsubsets(X)$ --- семейство конечных подмножеств $X$.
    \end{definition}

    \begin{corollary}
        Пусть $X$ счётно. Тогда $\finsubsets(X)$ счётно.
    \end{corollary}

    \begin{proof}
        Рассмотрим $h: X^* \to \finsubsets(X)$, действующую по правилу
        \[h(f) := \range(f)\]
        Легко видеть, что $h$ сюръективна, значит $\finsubsets(X)$ не более чем счётно.

        С другой стороны пусть $\nu: \NN \to X$ --- инъекция. Тогда рассмотрим $g: \NN \to \finsubsets(X)$, что
        \[g(n) := \nu[n]\]
        Несложно проверить, что $|\nu[n]| = n$, поэтому $g$ инъективна, значит $\finsubsets(X)$ бесконечно, а значит счётно.
    \end{proof}

    \begin{corollary}
        В следствие теоремы Кантора $\subsets$ нельзя заменить на $\finsubsets$.
    \end{corollary}

    \begin{theorem}[в ZFC]
        Пусть $X$ бесконечно, а $Y$ не более чем счётно. Тогда $|X \cup Y| = |X|$.
    \end{theorem}

    \begin{proof}
        Заменяя $Y$ на $Y\setminus X$, имеем, что WLOG $X \cap Y = \varnothing$. При этом у $X$ есть счётное подмножество $Z$. Тогда понятно, что $Z \cup Y$ счётно, а значит есть биекция $f: Z \cup Y \to Z$. Тогда определим $g: X \cup Y \to X$ так, что
        \[g(x) := \begin{cases}
            f(x)& \text{если $x \in Z \cup Y$}\\
            x& \text{если $x \in X \setminus Z$}
        \end{cases}\]
        Очевидно, что $g$ биективна.
    \end{proof}

    \begin{corollary}
        Пусть $X$ более чем счётно, а $Y$ не более чем счётно. Тогда $|X \setminus Y| = |X|$.
    \end{corollary}

    \begin{proof}
        Пусть $U := X \cap Y$, а $V := X \setminus U$. Ясно, что $U$ не более чем счётно, $V$ бесконечно. Значит, $|X| = |V \cup U| = |V| = |X \setminus Y|$. 
    \end{proof}

    \section{Упорядоченность}

    \begin{definition}
        \emph{Частично упорядоченное множество (ЧУМ)} --- пара из множества и частичного порядка на нём.

        \emph{Линейно упорядоченное множество (ЛУМ)} --- пара из множества и линейного порядка на нём.

        Обозначение: $\mathfrak{A} = \langle A, \leqslant \rangle$.
    \end{definition}

    \begin{definition}
        Пусть даны ЧУМ $\mathfrak{A} = \langle A, \leqslant \rangle$ и непустое $S \subseteq A$. Тогда $a \in A$ является
        \begin{itemize}
            \item \emph{максимальным элементом для $S$ в $\mathfrak{A}$}, если $a \in S \wedge \neg(\exists x \in S: a < x)$;
            \item \emph{минимальным элементом для $S$ в $\mathfrak{A}$}, если $a \in S \wedge \neg(\exists x \in S: x < a)$;
            \item \emph{наибольшим элементом для $S$ в $\mathfrak{A}$}, если $a \in S \wedge (\forall x \in S\quad x \leqslant a)$;
            \item \emph{наименьшим элементом для $S$ в $\mathfrak{A}$}, если $a \in S \wedge (\forall x \in S\quad a \leqslant x)$.
        \end{itemize}

        Если $S = A$, то уточнение ``для $S$'' опускают.

        Также $a$ является
        \begin{itemize}
            \item \emph{верхней гранью для $S$ в $\mathfrak{A}$}, если $\forall x \in S\quad x \leqslant a$;
            \item \emph{нижней гранью для $S$ в $\mathfrak{A}$}, если $\forall x \in S\quad x \geqslant a$;
            \item \emph{супремумом гранью для $S$ в $\mathfrak{A}$}, если $a$ --- наименьшая верхняя грань для $S$ в $\mathfrak{A}$;
            \item \emph{инфимумом гранью для $S$ в $\mathfrak{A}$}, если $a$ --- наибольшая нижняя грань для $S$ в $\mathfrak{A}$.
        \end{itemize}
    \end{definition}

    \begin{statement}
        В ЧУМ $\mathfrak{A}$
        \begin{itemize}
            \item не более одного наибольшего в $\mathfrak{A}$ элемента;
            \item всякий наибольший в $\mathfrak{A}$ максимален в $\mathfrak{A}$;
            \item любые два максимальных в $\mathfrak{A}$ несравнимы.
        \end{itemize}

        Аналогично для наименьших и минимальных элементов.
    \end{statement}

    \begin{statement}
        В ЛУМ все максимальные наибольшие и наоборот. Аналогично для минимальных и наименьших.
    \end{statement}

    \begin{definition}
        \emph{Гомоморфизм из $\langle A, \leqslant_A \rangle$ в $\langle B, \leqslant_B \rangle$} --- отображение $f: A \to B$, что
        \[
            a_1 \leqslant_A a_2 \Rightarrow f(a_1) \leqslant_B f(a_2)
        \]
        В таком случае ещё говорят, что $f$ сохраняет порядок.

        Если $f$ инъективно, а последнее условие усиливается до равносильности (а не остаётся следствием), то $f$ называется \emph{вложением из $\langle A, \leqslant_A \rangle$ в $\langle B, \leqslant_B \rangle$}.
    \end{definition}

    \begin{statement}
        Любой инъективный гомоморфизм из ЛУМ в ЧУМ является вложением.
    \end{statement}

    \begin{definition}
        \emph{Изоморфизм из $\mathfrak{A}$ в $\mathfrak{B}$} --- сюръективное вложение из $\mathfrak{A}$ в $\mathfrak{B}$. Обозначение: $\mathfrak{A} \simeq \mathfrak{B}$.
    \end{definition}

    \begin{statement}
        ``Изоморфность'' --- ``отношение эквивалентности'' на ЧУМах. Т.е. для любых $\mathfrak{A}$, $\mathfrak{B}$ и $\mathfrak{C}$ верно:
        \begin{enumerate}
            \item $\mathfrak{A} \simeq \mathfrak{A}$;
            \item $\mathfrak{A} \simeq \mathfrak{B} \Leftrightarrow \mathfrak{B} \simeq \mathfrak{A}$;
            \item $\mathfrak{A} \simeq \mathfrak{B} \simeq \mathfrak{C} \Rightarrow \mathfrak{A} \simeq \mathfrak{C}$.
        \end{enumerate}
    \end{statement}

    \begin{definition}
        Изоморфизм из $\mathfrak{A}$ на себя --- \emph{автоморфизм}.
    \end{definition}

    С ЧУМами можно делать базовые преобразования:
    \begin{enumerate}
        \item Пусть даны ЧУМ $\mathfrak{A} = \langle A, {\leqslant} \rangle$ и $S \subseteq A$. Возьмём
            \[ {\leqslant}_S := {\leqslant} \cap S \times S\]
            Тогда $\langle S, {\leqslant}_S \rangle$ --- ЧУМ. Оно называется \emph{индуцированным в $\mathfrak{A}$ по $S$}. При этом из ЛУМ получится ЛУМ.
        \item Пусть даны ЧУМ $\mathfrak{A} = \langle A, {\leqslant}_A \rangle$ и $\mathfrak{B} = \langle B, {\leqslant}_B \rangle$, причём $A$ и $B$ дизъюнктны. Возьмём
            \[{\leqslant} := {\leqslant}_A \cup A \times B \cup {\leqslant}_B\]
            Тогда $\langle A \cup B, {\leqslant} \rangle$ --- ЧУМ, которое обозначается $\mathfrak{A} \oplus \mathfrak{B}$. При этом из двух ЛУМ всегда получится ЛУМ.
        \item Пусть даны ЧУМ $\mathfrak{A} = \langle A, {\leqslant}_A \rangle$ и $\mathfrak{B} = \langle B, {\leqslant}_B \rangle$. Определим $\leqslant$ на $A \times B$ по правилу
            \[(a_1, b_1) \leqslant (a_2, b_2) :\Leftrightarrow a_1 \leqslant_A a_2 \wedge b_1 \leqslant \]
            Тогда $\langle A \times B, {\leqslant} \rangle$ --- ЧУМ, где $\leqslant$ традиционно называют \emph{покоординатным порядком}. Понятно, что $\leqslant$ мало когда бывает линейным.
        \item Модифицируем предыдущую конструкцию, сделав одну из координат главной. Например, первую:
            \[(a_1, b_1) \leqslant (a_2, b_2) :\Leftrightarrow a_1 < a_2 \vee (a_1 = a_2 \wedge b_1 \leqslant b_2)\]
            Тогда $\langle A \times B, {\leqslant} \rangle$ --- ЧУМ, которое обозначается $\mathfrak{A} \otimes \mathfrak{B}$. В таком случае из двух ЛУМ получается ЛУМ.
    \end{enumerate}

    \subsection{Трансфинитная индукция и фундированность}

    \begin{definition}
        Для ЧУМ $\mathfrak{A} = \langle A, {\leqslant} \rangle$ верен \emph{принцип трансфинитной индукции}, если для всякого $X \subseteq A$,
        \[\forall x \in A ((\forall y < x) y \in X \rightarrow x \in X) \rightarrow X = A\]
    \end{definition}

    \begin{definition}
        Для ЧУМ $\mathfrak{A} = \langle A, {\leqslant} \rangle$ верен \emph{принцип минимального элемента}, если для всякого $X \subseteq A$,
        \[X \neq \varnothing \rightarrow \exists x \in X ((\forall y \in X )\ y \nless x)\]
        Такие ЧУМ называются \emph{фундированными}.
    \end{definition}

    \begin{theorem}
        Для ЧУМ верен принцип трансфинитной индукции тогда и только тогда, когда оно фундировано.
    \end{theorem}

    \begin{proof}
        Пусть $X \subseteq A$. Обозначим $A \setminus X$ через $\overline{X}$. Тогда
        \begin{align*}
            \forall x \in A ((\forall y < x) y \in X \rightarrow x \in X) \rightarrow X = A &\Longleftrightarrow\\
            X \neq A \rightarrow \neg\forall x \in A ((\forall y < x) y \in X \rightarrow x \in X) &\Longleftrightarrow\\
            X \neq A \rightarrow \exists x \in A \neg((\forall y < x) y \in X \rightarrow x \in X) &\Longleftrightarrow\\
            X \neq A \rightarrow \exists x \in A ((\forall y < x) y \in X \wedge x \notin X) &\Longleftrightarrow\\
            X \neq A \rightarrow \exists x \in A ((\forall y \notin X) y \nless x \wedge x \notin X) &\Longleftrightarrow\\
            \overline{X} \neq \varnothing \rightarrow \exists x \in \overline{X} ((\forall y \in \overline{X}) y \nless x)&
        \end{align*}
    \end{proof}

    \begin{statement}\ 
        \begin{enumerate}
            \item Пусть даны фундированные ЧУМ $\mathfrak{A}$ и $\mathfrak{B}$, что $A \cap B = \varnothing$. Тогда $\mathfrak{A} \oplus \mathfrak{B}$ будет фундированным.
            \item Пусть даны фундированные ЧУМ $\mathfrak{A}$ и $\mathfrak{B}$. Тогда $\mathfrak{A} \otimes \mathfrak{B}$ будет фундированным.
        \end{enumerate}
    \end{statement}

    \begin{definition}
        \emph{Вполне упорядоченное множество (ВУМ)} --- фундированное ЛУМ. Порядки ВУМ называются \emph{полными порядками}.
    \end{definition}

    \begin{definition}
        Пусть дано ВУМ $\mathfrak{A} = \langle A, {\leqslant} \rangle$. \emph{Начальный сегмент} --- множество $S \subseteq A$, если для $\forall a_1, a_2 \in A$
        \[(a_1 \leqslant a_2 \wedge a_2 \in S) \Rightarrow a_1 \in S\]
    \end{definition}

    \begin{definition}
        Пусть дано ВУМ $\mathfrak{A} = \langle A, {\leqslant} \rangle$. Множество
        \[[0, a)_{\mathfrak{A}} := \{x \in A \mid x < a\}\]
        является начальным сегментом $\mathfrak{A}$. Когда ясно, о каком $\mathfrak{A}$ идёт речь, нижний индекс $\cdot_{\mathfrak{A}}$ обычно опускается.
    \end{definition}

    \begin{statement}
        Пусть $\mathfrak{A}$ --- ВУМ, а $S$ --- начальный сегмент $\mathfrak{A}$, отличный от $A$. Тогда существует единственный $a \in A$, что $S = [0, a)$.
    \end{statement}

    \begin{definition}
        $\IS_\mathfrak{A}$ --- множество всех начальных сегментов $\mathfrak{A}$, отличных от $A$, а
        \[{\subseteq}_{\IS_\mathfrak{A}} := \{(U, V) \in \IS_\mathfrak{A} \times \IS_\mathfrak{A} \mid U \subseteq V\}\]
    \end{definition}

    \begin{statement}
        Для любого ВУМ $\mathfrak{A}$ верно, что $\mathfrak{A} \simeq \langle \IS_\mathfrak{A}, {\subseteq}_{\IS_\mathfrak{A}} \rangle$.
    \end{statement}

    \begin{proof}
        Несложно видеть, что
        \[f: A \to \IS_\mathfrak{A}, a \mapsto [0, a)\]
        есть изоморфизм из $\mathfrak{A}$ в $\langle \IS_\mathfrak{A}, {\subseteq}_{\IS_\mathfrak{A}} \rangle$.
    \end{proof}

    \begin{statement}
        Пусть $\mathfrak{A}$ --- ВУМ, а $f$ --- вложение из $\mathfrak{A}$ в $\mathfrak{A}$. Тогда $f(a) \geqslant a$ для всех $a \in A$.
    \end{statement}

    \begin{proof}
        Рассмотрим
        \[X := \{a \in A \mid f(a) < a\}\]
        Предположим, что $X$ непусто. Пусть $a'$ --- наименьший элемент для $X$ в $\mathfrak{A}$. Тогда $f(a') < a'$, поэтому $f(f(a')) < f(a')$, что значит $f(a') \in X$. В таком случае $a' \leqslant f(a')$ --- противоречие.
    \end{proof}

    \begin{corollary}
        Для каждого ВУМ $\mathfrak{A}$ единственным автоморфизмом $\mathfrak{A}$ является $id_A$.
    \end{corollary}

    \begin{proof}
        Пусть $f$ --- автоморфизм $\mathfrak{A}$. Очевидно, что $f^{-1}$ также будет автоморфизмом $\mathfrak{A}$. Тогда для любого $a \in A$ имеем, что $f(a) \geqslant a$ и $f^{-1}(a) \geqslant a$, а значит $a \geqslant f(a) \geqslant a$, т.е. $f(a) = a$. Таким образом $f = id_A$.
    \end{proof}

    \begin{corollary}
        Для любых ВУМ $\mathfrak{A}$ и $\mathfrak{B}$ имеется не более одного изоморфизма из $\mathfrak{A}$ в $\mathfrak{B}$.
    \end{corollary}

    \begin{proof}
        Пусть $f$ и $g$ --- изоморфизмы из $\mathfrak{A}$ в $\mathfrak{B}$. Тогда несложно понять, что $f \circ g^{-1}$ есть автоморфизм, а значит $f \circ g^{-1} = id_A$. Следовательно $f = f \circ g^{-1} \circ g = id_A \circ g = g$.
    \end{proof}

    \begin{lemma}
        Никакой собственный начальный сегмент ВУМ $\mathfrak{A}$ не изоморфен самому $\mathfrak{A}$.
    \end{lemma}

    \begin{proof}
        Пусть $f$ --- изоморфизм из $\mathfrak{A}$ на некоторый собственный начальный сегмент $\mathfrak{A}$. Тогда $\range(f) = [0, a)$ для некоторого $a \in A$. Поэтому $f(a) < a$ --- противоречие.
    \end{proof}

    \begin{theorem}[о сравнении ВУМ]
        Для любых ВУМ $\mathfrak{A}$ и $\mathfrak{B}$ имеет место ровно один из трёх случаев:
        \begin{enumerate}
            \item \label{WOS_comparability_theorem_A=B} $\mathfrak{A}$ и $\mathfrak{B}$ изоморфны;
            \item \label{WOS_comparability_theorem_AtoB} $\mathfrak{A}$ изоморфно собственному начальному сегменту $\mathfrak{B}$;
            \item \label{WOS_comparability_theorem_BtoA} $\mathfrak{B}$ изоморфно собственному начальному сегменту $\mathfrak{A}$.
        \end{enumerate}

        При этом в пунктах (\ref{WOS_comparability_theorem_AtoB}) и (\ref{WOS_comparability_theorem_BtoA}) соответствующие собственные начальные сегменты определяются однозначно.
    \end{theorem}

    \begin{proof}
        Единственность сегментов в (\ref{WOS_comparability_theorem_AtoB}) и (\ref{WOS_comparability_theorem_BtoA}) и взаимная исключаемость пунктов (\ref{WOS_comparability_theorem_A=B}), (\ref{WOS_comparability_theorem_AtoB}) и (\ref{WOS_comparability_theorem_BtoA}) следуют из предыдущей леммы. Поэтому осталось показать, что один из трёх случаев точно будет иметь место.

        Рассмотрим
        \[\xi := \{(a, b) \in A \times B \mid [0, a)_\mathfrak{A} \simeq [0, b)_\mathfrak{B}\}\]
        По предыдущей лемме $\xi$ и $\xi^{-1}$ являются функциональными.

        Также несложно видеть, что если $f$ --- изоморфизм из $[0, a)_\mathfrak{A}$ на $[0, b)_\mathfrak{B}$, а $a' <_A a$ и $b' <_B b$, то
        \begin{itemize}
            \item $f\upharpoonright_{[0, a')_\mathfrak{A}}$ является изоморфизмом из $[0, a')_\mathfrak{A}$ на $[0, f(a'))_\mathfrak{B}$;
            \item $f^{-1}\upharpoonright_{[0, b')_\mathfrak{B}}$ является изоморфизмом из $[0, b')_\mathfrak{B}$ на $[0, f^{-1}(b'))_\mathfrak{A}$.
        \end{itemize}
        Следовательно, если $a \in \dom(\xi)$, то $[0, a)_\mathfrak{A} \subseteq \dom(\xi)$; если $b \in \range(\xi)$, то $[0, b)_\mathfrak{B} \subseteq \range(\xi)$. Поэтому $\xi$ --- биекция между начальными сегментами $\mathfrak{A}$ и $\mathfrak{B}$. Также следует и то, что $a_1 <_A a_2 \Leftrightarrow f(a_1) <_B f(a_2)$, что значит, что $\xi$ --- изоморфизм между начальными сегментами $\mathfrak{A}$ и $\mathfrak{B}$.

        Если $\dom(\xi) \neq A$, а $\range(\xi) \neq B$, то существуют $a \in A$ и $b \in B$, что $\dom(\xi) = [0, a)_\mathfrak{A}$, а $\range(\xi) = [0, b)_\mathfrak{B}$. Это значит, что $(a, b) \in \xi$ --- противоречие. Значит $\dom(\xi) = A$ или $\range(\xi) = B$, откуда следует желаемое.
    \end{proof}

    
\end{document}